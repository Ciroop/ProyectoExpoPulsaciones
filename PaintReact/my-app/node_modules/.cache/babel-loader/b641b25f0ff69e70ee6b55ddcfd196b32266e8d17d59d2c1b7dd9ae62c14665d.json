{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ciroa\\\\OneDrive\\\\Escritorio\\\\Dibujo-React\\\\my-app\\\\src\\\\components\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s(({\n  currentStroke\n}, ref) => {\n  _s();\n  const canvasRef = useRef(null);\n  const ctxRef = useRef(null);\n  const drawHistory = useRef([]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctxRef.current = ctx;\n\n    // Establecer el tamaño del lienzo\n    canvas.width = window.innerWidth * 0.9;\n    canvas.height = window.innerHeight * 0.8;\n\n    // Dibujar imagen de fondo\n    const background = new Image();\n    background.src = '/background.jpg';\n    background.onload = () => {\n      ctx.drawImage(background, 0, 0, canvas.width, canvas.height);\n    };\n  }, []);\n\n  // Hacer disponibles las funciones de \"clearCanvas\" y \"undo\" a través de ref\n  useImperativeHandle(ref, () => ({\n    clearCanvas: () => {\n      const canvas = canvasRef.current;\n      const ctx = ctxRef.current;\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        // Redibujar la imagen de fondo después de limpiar el lienzo\n        const background = new Image();\n        background.src = '/background.jpg';\n        background.onload = () => {\n          ctx.drawImage(background, 0, 0, canvas.width, canvas.height);\n        };\n      }\n    },\n    undo: () => {\n      const ctx = ctxRef.current;\n      if (drawHistory.current.length > 0) {\n        drawHistory.current.pop();\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n        // Redibujar la imagen de fondo\n        const background = new Image();\n        background.src = '/background.jpg';\n        background.onload = () => {\n          ctx.drawImage(background, 0, 0, canvasRef.current.width, canvasRef.current.height);\n        };\n        // Volver a dibujar las acciones guardadas\n        drawHistory.current.forEach(drawAction => drawAction());\n      }\n    }\n  }));\n\n  // Función para manejar el dibujo en el canvas\n  const handleMouseDown = e => {\n    const ctx = ctxRef.current;\n    if (!ctx) return;\n    const startX = e.nativeEvent.offsetX;\n    const startY = e.nativeEvent.offsetY;\n    ctx.lineWidth = currentStroke.width;\n    ctx.strokeStyle = currentStroke.color;\n    ctx.beginPath();\n    ctx.moveTo(startX, startY);\n    const draw = e => {\n      ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n      ctx.stroke();\n    };\n    const stopDrawing = () => {\n      ctx.closePath();\n      drawHistory.current.push(() => ctx.stroke()); // Guarda la acción de dibujo\n      window.removeEventListener('mousemove', draw);\n      window.removeEventListener('mouseup', stopDrawing);\n    };\n    window.addEventListener('mousemove', draw);\n    window.addEventListener('mouseup', stopDrawing);\n  };\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    onMouseDown: handleMouseDown\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 10\n  }, this);\n}, \"T2Oj/Xi1iGpweDj7ZzOESdooeeA=\")), \"T2Oj/Xi1iGpweDj7ZzOESdooeeA=\");\n_c2 = Canvas;\nexport default Canvas;\nvar _c, _c2;\n$RefreshReg$(_c, \"Canvas$forwardRef\");\n$RefreshReg$(_c2, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","forwardRef","useImperativeHandle","jsxDEV","_jsxDEV","Canvas","_s","_c","currentStroke","ref","canvasRef","ctxRef","drawHistory","canvas","current","ctx","getContext","width","window","innerWidth","height","innerHeight","background","Image","src","onload","drawImage","clearCanvas","clearRect","undo","length","pop","forEach","drawAction","handleMouseDown","e","startX","nativeEvent","offsetX","startY","offsetY","lineWidth","strokeStyle","color","beginPath","moveTo","draw","lineTo","stroke","stopDrawing","closePath","push","removeEventListener","addEventListener","onMouseDown","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["C:/Users/ciroa/OneDrive/Escritorio/Dibujo-React/my-app/src/components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, forwardRef, useImperativeHandle } from 'react';\r\n\r\nconst Canvas = forwardRef(({ currentStroke }, ref) => {\r\n  const canvasRef = useRef(null);\r\n  const ctxRef = useRef(null);\r\n  const drawHistory = useRef([]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    ctxRef.current = ctx;\r\n\r\n    // Establecer el tamaño del lienzo\r\n    canvas.width = window.innerWidth * 0.9;\r\n    canvas.height = window.innerHeight * 0.8;\r\n\r\n    // Dibujar imagen de fondo\r\n    const background = new Image();\r\n    background.src = '/background.jpg';\r\n    background.onload = () => {\r\n      ctx.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n    };\r\n  }, []);\r\n\r\n  // Hacer disponibles las funciones de \"clearCanvas\" y \"undo\" a través de ref\r\n  useImperativeHandle(ref, () => ({\r\n    clearCanvas: () => {\r\n      const canvas = canvasRef.current;\r\n      const ctx = ctxRef.current;\r\n      if (ctx) {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        // Redibujar la imagen de fondo después de limpiar el lienzo\r\n        const background = new Image();\r\n        background.src = '/background.jpg';\r\n        background.onload = () => {\r\n          ctx.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n        };\r\n      }\r\n    },\r\n    undo: () => {\r\n      const ctx = ctxRef.current;\r\n      if (drawHistory.current.length > 0) {\r\n        drawHistory.current.pop();\r\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n        // Redibujar la imagen de fondo\r\n        const background = new Image();\r\n        background.src = '/background.jpg';\r\n        background.onload = () => {\r\n          ctx.drawImage(background, 0, 0, canvasRef.current.width, canvasRef.current.height);\r\n        };\r\n        // Volver a dibujar las acciones guardadas\r\n        drawHistory.current.forEach((drawAction) => drawAction());\r\n      }\r\n    },\r\n  }));\r\n\r\n  // Función para manejar el dibujo en el canvas\r\n  const handleMouseDown = (e) => {\r\n    const ctx = ctxRef.current;\r\n    if (!ctx) return;\r\n\r\n    const startX = e.nativeEvent.offsetX;\r\n    const startY = e.nativeEvent.offsetY;\r\n\r\n    ctx.lineWidth = currentStroke.width;\r\n    ctx.strokeStyle = currentStroke.color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(startX, startY);\r\n\r\n    const draw = (e) => {\r\n      ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n      ctx.stroke();\r\n    };\r\n\r\n    const stopDrawing = () => {\r\n      ctx.closePath();\r\n      drawHistory.current.push(() => ctx.stroke()); // Guarda la acción de dibujo\r\n      window.removeEventListener('mousemove', draw);\r\n      window.removeEventListener('mouseup', stopDrawing);\r\n    };\r\n\r\n    window.addEventListener('mousemove', draw);\r\n    window.addEventListener('mouseup', stopDrawing);\r\n  };\r\n\r\n  return <canvas ref={canvasRef} onMouseDown={handleMouseDown} />;\r\n});\r\n\r\nexport default Canvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}